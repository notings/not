"use strict";var express=require("express"),router=express.Router(),_require=require("../db/db"),find=_require.find,update=_require.update;router.get("/userinfo",function(r,n){var s,t,o,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n.append("Access-Control-Allow-Origin","*"),s=r.query,t=s.username,o=s.password,console.log(r.query),e.next=5,regeneratorRuntime.awrap(find("userinfo",{username:t,password:o}).then(function(e){1<=e.length?n.send("1"):n.send("0")}));case 5:u=e.sent,n.json(u);case 7:case"end":return e.stop()}})}),router.get("/infos",function(r,n){var s,t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n.append("Access-Control-Allow-Origin","*"),s=r.query.username,console.log(r.query),console.log(s),e.next=6,regeneratorRuntime.awrap(find("infos",{name:s}));case 6:t=e.sent,n.json(t);case 8:case"end":return e.stop()}})}),router.get("/setpas",function(r,n){var s,t,o,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n.append("Access-Control-Allow-Origin","*"),s=r.query,t=s.userst,o=s.newpas,console.log(r.query),e.next=5,regeneratorRuntime.awrap(update("userinfo",{username:t},{password:o}));case 5:1===(u=e.sent).result.ok?n.send("1"):n.send("0"),console.log(u);case 8:case"end":return e.stop()}})}),router.get("/learns",function(e,r){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return r.append("Access-Control-Allow-Origin","*"),e.next=3,regeneratorRuntime.awrap(find("learns"));case 3:n=e.sent,r.json(n);case 5:case"end":return e.stop()}})}),module.exports=router;